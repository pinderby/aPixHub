define(["jquery","globals","underscore","backbone","marionette","bootstrap"],function(t,e,a,i,l){var r=i.View.extend({events:{"click .closebutton":"closeTrailerIframeModal"},initialize:function(e){this.$el=e.el,this.metaViewport=t("meta[name='viewport']"),this.currentViewportValue=this.metaViewport.attr("content"),this.$el.on("hidden.bs.modal",this.onClose.bind(this))},openIframeModal:function(t,e,a){this.$el.modal(),this.$("#iframeVideoPlayer").attr("src",t),this.metaViewport.attr("content",this.currentViewportValue+",minimum-scale=1,maximum-scale=1,user-scalable=no"),this.$(".modal-dialog").append("<div class='modal-link-text'><a target='_blank' class='modal-link-url' style='color:#FFFFFF' href="+a+"></a></div>"),this.$(".modal-link-url").text(e)},closeTrailerIframeModal:function(){t("#newIframeTrailerModal").modal("hide")},onClose:function(){console.log("Destroying video iframe"),this.$("#iframeVideoPlayer").attr("src","about:blank"),this.metaViewport.attr("content",this.currentViewportValue)}}),o=i.View.extend({events:{"click .closebutton":"closeTrailerModal","click .closeBtn":"closeTrailerModal"},initialize:function(t){this.$el=t.el},closeTrailerModal:function(){this.$el.modal("hide"),null!=this.currentTrailer&&(this.currentTrailer.close(),this.currentTrailer=null)},openNewModal:function(a,i,l,r,o,n){require([e.StaticHost+"/static/js/app/views/RTVideo.js"],function(e){var r={$el:this.$("#videoPlayer"),urlHLS:a,urlMP4:i,width:"100%",thumbnailImg:l,autostart:o,preroll:{dfpTarget:"video/trailers",custParams:{videoId:n},pageUrl:window.location.href}};t(window).width()<768&&(r.playerComplete=this.closeTrailerModal.bind(this)),this.currentTrailer=new e(r),this.currentTrailer.on("end-warning",function(){this.$el.find(".player-poststitial").css("opacity",1)}.bind(this))}.bind(this)),this.$el.modal(),this.$el.on("hidden.bs.modal",this.closeTrailerModal.bind(this)),dataLayer.push({event:"ModalTrailer",title:r})}});return l.ItemView.extend({events:{"click .trailer_play_action_button":"openModal","click .featured_video_play_action_button":"openIFrameModal"},initialize:function(a){this.$el=a.el,this.modalInit=!1,this.modalCallback=null,require(["text!"+e.StaticHost+"/static/templates/modalTrailer.html"],function(e){t("body").append(e),this.trailerModal=new o({el:t("#newTrailerModal")}),this.modalInit=!0,this.modalCallback&&(this.modalCallback(),this.modalCallback=null)}.bind(this)),this.iframeInit=!1,this.iframeCallback=null,require(["text!"+e.StaticHost+"/static/templates/modalTrailer.iframe.html"],function(e){t("body").append(e),this.iFrameTrailerModal=new r({el:t("#newIframeTrailerModal")}),this.iFrameTrailerModal.render(),this.iframeInit=!0,this.iframeCallback&&(this.iframeCallback(),this.iframeCallback=null)}.bind(this))},changeVideo:function(t){this.trailerModal.currentTrailer.changeVideo(t)},openIFrameModal:function(e){e.preventDefault();var a=t(e.currentTarget);this.iframeInit?this.iFrameTrailerModal.openIframeModal(a.attr("data-trailer-url"),a.data("sponsoredText"),a.data("sponsoredUrl")):this.iframeCallback=function(){this.iFrameTrailerModal.openIframeModal(a.attr("data-trailer-url"),a.data("sponsoredText"),a.data("sponsoredUrl"))}.bind(this)},openModal:function(e){e.preventDefault();var a=t(e.currentTarget);this.modalInit?this.trailerModal.openNewModal(a.data("hls-url"),a.data("mp4-url"),a.data("thumbnail"),a.data("title"),!0,a.data("video-id")):this.modalCallback=function(){this.trailerModal.openNewModal(a.data("hls-url"),a.data("mp4-url"),a.data("thumbnail"),a.data("title"),!0,a.data("video-id"))}.bind(this)}})});
//# sourceMappingURL=modalTrailer.jsp.min.js.map